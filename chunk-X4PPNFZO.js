import{a as lt}from"./chunk-ICGHCYIY.js";import{a as ct}from"./chunk-U3LFEJY5.js";import{a as st,b as at}from"./chunk-SM6POI6B.js";import{w as ot}from"./chunk-ZCTLOLTJ.js";import{d as ce}from"./chunk-FD3KUP4A.js";import{$ as R,$a as Z,Ab as K,B as He,Ba as Ge,Bb as O,Ca as Ye,Cb as Je,Ea as s,G as $e,Gb as Q,Hb as oe,I as A,Ib as se,J as We,Ja as T,Kb as et,Lb as B,Mb as V,Na as m,Oa as j,Ob as Te,Q as Ke,R as qe,Ra as G,S as z,T as Ue,Ta as Ze,Ua as ve,_a as Y,aa as L,ab as Qe,bb as Ce,c as Fe,cb as ye,cc as tt,db as C,ea as v,eb as o,ec as it,f as Be,fb as a,fc as nt,gb as h,hb as y,ib as E,ic as ae,ja as k,jb as x,ka as I,kb as Ee,la as M,lb as Me,mb as W,mc as rt,na as ze,nb as w,p as be,pb as g,qb as ie,rb as ne,sb as Xe,t as P,tb as xe,u as S,ub as we,v as te,vb as Se,wb as re,x as Ve,xb as F,zb as l}from"./chunk-PT7SL42D.js";import{a as J,b as ee,g as _e}from"./chunk-WTI2L5DI.js";var le=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["svg-chevron-right"]],decls:2,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","currentcolor"],["d","M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"]],template:function(e,i){e&1&&(M(),y(0,"svg",0),x(1,"path",1),E())},encapsulation:2})};var Ct=["*"],q=class t{title="";first;last;_hidden=!0;didToogle=new Ze;get hidden(){return this._hidden}toggle(n=!1){console.log("toggle "+this.title),this._hidden=!this._hidden,n&&this.didToogle.emit()}react(){this._hidden||this.toggle(),console.log("react "+this.title)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-section"]],inputs:{title:"title",first:"first",last:"last"},outputs:{didToogle:"didToogle"},ngContentSelectors:Ct,decls:9,vars:9,consts:[[1,"spoiler-wrapper"],[1,"spoiler-label",3,"click"],[1,"hint"],[1,"icon"],[1,"title"],[1,"spoiler-content"]],template:function(e,i){e&1&&(ie(),o(0,"div",0)(1,"div",1),w("click",function(){return i.toggle(!0)}),o(2,"span",2)(3,"span",3),h(4,"svg-chevron-right"),a(),o(5,"h3",4),l(6),a()()(),o(7,"div",5),ne(8),a()()),e&2&&(F("first-spoiler",i.first)("last-spoiler",i.last),s(2),F("opened",!i.hidden),s(4),K(i.title),s(),F("hidden",i.hidden))},dependencies:[le],styles:[".spoiler-wrapper[_ngcontent-%COMP%]{display:inline-block;border-radius:0;padding:.5em;-webkit-user-select:none;user-select:none;min-width:400px}.spoiler-wrapper[_ngcontent-%COMP%]{background-color:var(--dark-blue);color:var(--white)}.first-spoiler[_ngcontent-%COMP%]{border-top-left-radius:.5em;border-top-right-radius:.5em}.last-spoiler[_ngcontent-%COMP%]{border-bottom-left-radius:.5em;border-bottom-right-radius:.5em}.spoiler-label[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;vertical-align:middle}.icon[_ngcontent-%COMP%]{transition-duration:.5s}.spoiler-label[_ngcontent-%COMP%]   .opened[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:rotate(90deg);transform-origin:center}.title[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;color:var(--white)}.spoiler-content[_ngcontent-%COMP%]{margin-top:.5em;transition:opacity .3s ease}.spoiler-content.hidden[_ngcontent-%COMP%]{opacity:0;height:0;overflow:hidden}"]})};var yt=["*"],de=class t{children;sub=null;ngAfterViewInit(){let n=this.children.map(e=>e.didToogle.pipe(We(e)));this.sub=He(...n).subscribe(e=>{this.children.filter(i=>i!==e).forEach(i=>i.react())}),this.children.forEach((e,i)=>{e.first=i===0,e.last=i===this.children.length-1})}ngOnDestroy(){this.sub?.unsubscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["app-section-container"]],contentQueries:function(e,i,r){if(e&1&&Xe(r,q,4),e&2){let c;xe(c=we())&&(i.children=c)}},ngContentSelectors:yt,decls:2,vars:0,consts:[[1,"container"]],template:function(e,i){e&1&&(ie(),y(0,"div",0),ne(1),E())},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]})};var ue=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["svg-play"]],decls:2,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","currentcolor"],["d","M320-200v-560l440 280-440 280Z"]],template:function(e,i){e&1&&(M(),y(0,"svg",0),x(1,"path",1),E())},encapsulation:2})};function xt(t,n){if(t&1&&(Ee(0),l(1),Me()),t&2){let e=g(2);s(),O(" Max possible: ",e.potentialMaxPoints," pts.")}}function wt(t,n){if(t&1&&(Ee(0),o(1,"strong"),l(2,"Unlocked!"),a(),h(3,"br"),l(4," You can improve your score anytime. "),G(5,xt,2,1,"ng-container",10),Me()),t&2){let e=g();s(5),C("ngIf",e.potentialMaxPoints>0)}}function St(t,n){if(t&1&&(o(0,"strong"),l(1,"Locked Subject"),a(),h(2,"br"),l(3),h(4,"br"),l(5)),t&2){let e=g();s(3),O(" Requires at least ",e.requiredPoints," total points to unlock."),s(2),Je(" You currently have ",e.userTotalPoints," pts (",e.unlockProgressPercent,"%). ")}}function Tt(t,n){if(t&1&&(o(0,"div",11),h(1,"div",12),a()),t&2){let e=g();s(),re("width",e.unlockProgressPercent,"%")}}function Pt(t,n){if(t&1&&(o(0,"div",13),h(1,"div",12),a()),t&2){let e=g();s(),re("width",e.subjectCompletionPercent,"%")}}var me=class t{constructor(n){this.router=n}title;available=!1;destination=["/"];earnedPoints=0;requiredPoints=0;userTotalPoints=0;potentialMaxPoints=0;onPlay(){this.available&&this.router.navigate(this.destination)}get subtitle(){return this.available?this.potentialMaxPoints>0?`${this.earnedPoints} / ${this.potentialMaxPoints} pts`:`${this.earnedPoints} pts earned`:`Locked \xB7 Need ${Math.max(0,this.requiredPoints-this.userTotalPoints)} pts`}get subtitleClass(){return this.available?"subtitle--green":"subtitle--red"}get unlockProgressPercent(){if(this.available)return 100;if(!this.requiredPoints)return 0;let n=this.userTotalPoints/this.requiredPoints*100;return Math.max(0,Math.min(100,Math.round(n)))}get subjectCompletionPercent(){if(this.potentialMaxPoints<=0)return 0;let n=this.earnedPoints/this.potentialMaxPoints*100;return Math.max(0,Math.min(100,Math.round(n)))}static \u0275fac=function(e){return new(e||t)(T(ce))};static \u0275cmp=m({type:t,selectors:[["app-subject-card"]],inputs:{title:"title",available:"available",destination:"destination",earnedPoints:"earnedPoints",requiredPoints:"requiredPoints",userTotalPoints:"userTotalPoints",potentialMaxPoints:"potentialMaxPoints"},decls:14,vars:10,consts:[["lockedTooltip",""],[1,"subject-card"],[1,"play-button",3,"click","disabled"],[1,"text"],[1,"title","tooltip-trigger"],[1,"tooltip-content"],[4,"ngIf","ngIfElse"],[1,"subtitle",3,"ngClass"],["class","unlock-bar-wrapper",4,"ngIf"],["class","unlock-bar-wrapper","style","background:rgba(255,255,255,0.05)",4,"ngIf"],[4,"ngIf"],[1,"unlock-bar-wrapper"],[1,"unlock-bar-fill"],[1,"unlock-bar-wrapper",2,"background","rgba(255,255,255,0.05)"]],template:function(e,i){if(e&1){let r=W();o(0,"div",1)(1,"button",2),w("click",function(){return k(r),I(i.onPlay())}),h(2,"svg-play"),a(),o(3,"div",3)(4,"h5",4),l(5),o(6,"span",5),G(7,wt,6,1,"ng-container",6)(8,St,6,3,"ng-template",null,0,Te),a()(),o(10,"p",7),l(11),a(),G(12,Tt,2,2,"div",8)(13,Pt,2,2,"div",9),a()()}if(e&2){let r=Se(9);F("disabled",!i.available),s(),C("disabled",!i.available),s(4),O(" ",i.title," "),s(2),C("ngIf",i.available)("ngIfElse",r),s(3),C("ngClass",i.subtitleClass),s(),O(" ",i.subtitle," "),s(),C("ngIf",!i.available),s(),C("ngIf",i.available&&i.potentialMaxPoints>0&&i.earnedPoints<i.potentialMaxPoints)}},dependencies:[ue,tt,ae,it],styles:[".subject-card[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border-radius:8px;background-color:var(--darkest-blue);box-shadow:0 2px 4px #0000001a;position:relative}.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.play-button[_ngcontent-%COMP%]{background:none;border:none;margin-right:1rem;cursor:pointer;color:var(--white);transition:color .3s}.play-button[_ngcontent-%COMP%]:hover{color:var(--electric-blue)}.text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.title[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;color:var(--white)}.subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.875rem}.subtitle--grey[_ngcontent-%COMP%]{color:#888}.subtitle--green[_ngcontent-%COMP%]{color:var(--electric-blue);font-weight:600}.subtitle--red[_ngcontent-%COMP%]{color:#d8895a;font-style:italic}.subject-card.disabled[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]{cursor:not-allowed;color:#666}.unlock-bar-wrapper[_ngcontent-%COMP%]{margin-top:.35rem;width:140px;height:6px;background:#ffffff14;border-radius:4px;overflow:hidden}.unlock-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--electric-blue),#4db6ff);transition:width .4s ease}.tooltip-trigger[_ngcontent-%COMP%]{position:relative;cursor:help}.tooltip-trigger[_ngcontent-%COMP%]:hover   .tooltip-content[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);pointer-events:auto}.tooltip-content[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;background:#1f2a40;color:var(--white);padding:.5rem .75rem;border-radius:6px;box-shadow:0 4px 12px #00000040;width:220px;font-size:.65rem;line-height:1.2;opacity:0;transform:translateY(6px);transition:opacity .25s ease,transform .25s ease;z-index:10;pointer-events:none}.tooltip-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--electric-blue)}"]})};var pe=class t{size=100;color="blue";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["svg-python"]],inputs:{size:"size",color:"color"},decls:5,vars:0,consts:[["viewBox","0 0 32 32","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill","#36454f","stroke","#1a303f","stroke-width",".5","stroke-linejoin","round","fill-rule","evenodd","clip-rule","evenodd","d",`
            M13.0164 2
            C10.8193 2 9.03825 3.72453 9.03825 5.85185
            V8.51852
            H15.9235
            V9.25926
            H5.97814
            C3.78107 9.25926 2 10.9838 2 13.1111
            L2 18.8889
            C2 21.0162 3.78107 22.7407 5.97814 22.7407
            H8.27322
            V19.4815
            C8.27322 17.3542 10.0543 15.6296 12.2514 15.6296
            H19.5956
            C21.4547 15.6296 22.9617 14.1704 22.9617 12.3704
            V5.85185
            C22.9617 3.72453 21.1807 2 18.9836 2
            H13.0164
            Z
        `],["fill","#1a303f","stroke","#1a303f","stroke-width",".1","stroke-linecap","round","stroke-linejoin","round","d",`
            M12.0984 6.74074
            C12.8589 6.74074 13.4754 6.14378 13.4754 5.40741
            C13.4754 4.67103 12.8589 4.07407 12.0984 4.07407
            C11.3378 4.07407 10.7213 4.67103 10.7213 5.40741
            C10.7213 6.14378 11.3378 6.74074 12.0984 6.74074
            Z
        `],["fill","#1a303f","stroke","url(#paint1_linear_87_8204)","stroke-width","2","stroke-linejoin","round","fill-rule","evenodd","clip-rule","evenodd","d",`
            M18.9834 30
            C21.1805 30 22.9616 28.2755 22.9616 26.1482
            V23.4815
            L16.0763 23.4815
            L16.0763 22.7408
            L26.0217 22.7408
            C28.2188 22.7408 29.9998 21.0162 29.9998 18.8889
            V13.1111
            C29.9998 10.9838 28.2188 9.25928 26.0217 9.25928
            L23.7266 9.25928
            V12.5185
            C23.7266 14.6459 21.9455 16.3704 19.7485 16.3704
            L12.4042 16.3704
            C10.5451 16.3704 9.03809 17.8296 9.03809 19.6296
            L9.03809 26.1482
            C9.03809 28.2755 10.8192 30 13.0162 30
            H18.9834
            Z
        `],["fill","#36454f","stroke-width","0.1","stroke-linecap","round","stroke-linejoin","round","d",`
            M19.9015 25.2593
            C19.1409 25.2593 18.5244 25.8562 18.5244 26.5926
            C18.5244 27.3290 19.1409 27.9259 19.9015 27.9259
            C20.6620 27.9259 21.2785 27.3290 21.2785 26.5926
            C21.2785 25.8562 20.6620 25.2593 19.9015 25.2593
            Z
        `]],template:function(e,i){e&1&&(M(),y(0,"svg",0),x(1,"path",1)(2,"path",2)(3,"path",3)(4,"path",4),E())},encapsulation:2})};var fe=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["svg-login-icon"]],decls:2,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","currentcolor"],["d","M480-120v-80h280v-560H480v-80h280q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H480Zm-80-160-55-58 102-102H120v-80h327L345-622l55-58 200 200-200 200Z"]],template:function(e,i){e&1&&(M(),y(0,"svg",0),x(1,"path",1),E())},encapsulation:2})};var he=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=m({type:t,selectors:[["svg-log-out"]],decls:2,vars:0,consts:[["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","currentcolor"],["d","M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"]],template:function(e,i){e&1&&(M(),y(0,"svg",0),x(1,"path",1),E())},encapsulation:2})};var Pe;try{Pe=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Pe=!1}var ge=(()=>{class t{_platformId=v(Ge);isBrowser=this._platformId?rt(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Pe)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ae(t){return Array.isArray(t)?t:[t]}var dt=new Set,H,At=(()=>{class t{_platform=v(ge);_nonce=v(Ye,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):It}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&kt(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kt(t,n){if(!dt.has(t))try{H||(H=document.createElement("style"),n&&H.setAttribute("nonce",n),H.setAttribute("type","text/css"),document.head.appendChild(H)),H.sheet&&(H.sheet.insertRule(`@media ${t} {body{ }}`,0),dt.add(t))}catch(e){console.error(e)}}function It(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var mt=(()=>{class t{_mediaMatcher=v(At);_zone=v(ve);_queries=new Map;_destroySubject=new Be;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return ut(Ae(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=ut(Ae(e)).map(p=>this._registerQuery(p).observable),c=te(r);return c=Ve(c.pipe(A(1)),c.pipe(Ke(1),$e(0))),c.pipe(S(p=>{let d={matches:!1,breakpoints:{}};return p.forEach(({matches:_,query:$})=>{d.matches=d.matches||_,d.breakpoints[$]=_}),d}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),c={observable:new Fe(p=>{let d=_=>this._zone.run(()=>p.next(_));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(qe(i),S(({matches:p})=>({query:e,matches:p})),Ue(this._destroySubject)),mql:i};return this._queries.set(e,c),c}static \u0275fac=function(i){return new(i||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ut(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}var N=(function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t})(N||{}),pt="cdk-high-contrast-black-on-white",ft="cdk-high-contrast-white-on-black",ke="cdk-high-contrast-active",Ie=(()=>{class t{_platform=v(ge);_hasCheckedHighContrastMode;_document=v(ze);_breakpointSubscription;constructor(){this._breakpointSubscription=v(mt).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return N.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,c=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),c){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return N.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return N.BLACK_ON_WHITE}return N.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(ke,pt,ft),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===N.BLACK_ON_WHITE?e.add(ke,pt):i===N.WHITE_ON_BLACK&&e.add(ke,ft)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Oe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=j({type:t});static \u0275inj=L({})}return t})();var ht=(()=>{class t{constructor(){v(Ie)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||t)};static \u0275mod=j({type:t});static \u0275inj=L({imports:[Oe,Oe]})}return t})();var gt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=j({type:t});static \u0275inj=L({imports:[ht]})}return t})();var Rt=(t,n)=>["/lesson",t,n],Lt=(t,n)=>n.id;function jt(t,n){if(t&1){let e=W();o(0,"button",13),w("click",function(){k(e);let r=g();return I(r.logout())}),o(1,"div",14),l(2,"Logout"),a(),h(3,"svg-log-out"),a()}}function Ft(t,n){if(t&1){let e=W();o(0,"button",13),w("click",function(){k(e);let r=g();return I(r.login())}),o(1,"div",14),l(2,"Login/Register"),a(),h(3,"svg-login-icon"),a()}}function Bt(t,n){if(t&1){let e=W();o(0,"div",12)(1,"div",15)(2,"button",16),w("click",function(){k(e);let r=g();return I(r.startRandomPractice())}),l(3," Random Questions "),o(4,"span",17),l(5),a()(),o(6,"button",16),w("click",function(){k(e);let r=g();return I(r.startWorstPractice())}),l(7," Worst Questions "),o(8,"span",17),l(9),a()(),o(10,"button",18),w("click",function(){k(e);let r=g();return I(r.goToStats())}),l(11," Stats "),o(12,"span",17),l(13,"View detailed performance analytics."),a()()()()}if(t&2){g();let e=se(23);s(2),C("disabled",!e),s(3),K(e?"Get some practice questions from passed subjects.":"Pass at least one subject to enable."),s(),C("disabled",!e),s(3),K(e?"Retry your worst-performing questions.":"Pass at least one subject to enable.")}}function Vt(t,n){t&1&&(o(0,"p"),l(1,"No subjects available."),a())}function Ht(t,n){if(t&1&&h(0,"app-subject-card",21),t&2){let e=n.$implicit,i=g(2).$implicit;C("title",e.title)("available",e.available)("earnedPoints",e.earnedPoints)("requiredPoints",e.requiredPoints)("userTotalPoints",e.userTotalPoints)("potentialMaxPoints",e.potentialMaxPoints)("destination",et(7,Rt,i.id,e.id))}}function $t(t,n){if(t&1&&Ce(0,Ht,1,10,"app-subject-card",21,Lt),t&2){g();let e=se(2);ye(e)}}function Wt(t,n){if(t&1&&(o(0,"app-section",19)(1,"div",20),Q(2),Y(3,Vt,2,0,"p")(4,$t,2,0),a()()),t&2){let e=n.$implicit;C("title",e.sectionPotentialMaxPoints?e.title+" ("+(e.sectionEarnedPoints||0)+" / "+e.sectionPotentialMaxPoints+" pts)":e.title),s(2);let i=oe(e.subjects);s(),Z(i!=null&&i.length?4:3)}}function Kt(t,n){if(t&1&&Ce(0,Wt,5,3,"app-section",19,Qe),t&2){g();let e=se(27);ye(e)}}function qt(t,n){t&1&&(o(0,"p"),l(1,"Loading content..."),a())}var _t=class t{constructor(n,e,i,r,c,p){this.router=n;this.authService=e;this.contentService=i;this.userService=r;this.attemptService=c;this.practiceService=p}userIsAuthenticated$;userDisplayName$;userPoints$;sections$;hasPassedSubject$;ngOnInit(){let n=this.authService.authState();this.userIsAuthenticated$=n.pipe(S(e=>!!e)),this.userDisplayName$=n.pipe(S(e=>e?.displayName??"Guest")),this.userPoints$=n.pipe(z(e=>e?this.userService.getUserPoints(e.uid):be(0))),this.sections$=n.pipe(z(e=>this.contentService.getAllSections().pipe(z(i=>this.userService.getUserPoints(e.uid).pipe(z(r=>{let p=i.map(d=>ee(J({},d),{subjects:(d.subjects||[]).map(_=>({sub:_,sec:d}))})).flatMap(d=>d.subjects.map(_=>this.userService.getSubjectProgress(e.uid,_.sec.id,_.sub.id).pipe(S($=>({wrapper:_,progress:$})))));return p.length===0?be(i):te(p).pipe(S(d=>{let _=new Map;return d.forEach(u=>{let f=`${u.wrapper.sec.id}|${u.wrapper.sub.id}`;_.set(f,u.progress?.points||0)}),i.map(u=>{let f=0,U=0,bt=(u.subjects||[]).map(X=>{let De=X.minPointsRequired||0,Ne=_.get(`${u.id}|${X.id}`)||0,vt=r>=De,Re=(X.contents||[]).reduce((Le,je)=>typeof je?.maxPoints=="number"?Le+(je.maxPoints||0):Le,0);return f+=Ne,U+=Re,ee(J({},X),{available:vt,earnedPoints:Ne,requiredPoints:De,userTotalPoints:r,potentialMaxPoints:Re})});return ee(J({},u),{sectionEarnedPoints:f,sectionPotentialMaxPoints:U,subjects:bt})})}))})))))),this.hasPassedSubject$=this.sections$.pipe(S(e=>e.some(i=>i.subjects.some(r=>r.earnedPoints>0))))}login(){this.router.navigate(["/login"])}logout(){this.authService.logout().subscribe({next:()=>this.router.navigate(["/login"]),error:n=>{alert("Logout failed. Please try again."),console.error("Logout failed",n)}})}extractPassedQuestions(n){let e=[];return n.forEach(i=>i.subjects.forEach(r=>{r.earnedPoints>0&&Array.isArray(r.contents)&&r.contents.forEach(c=>{c?.id&&(c.type==="mcq"||c.type==="truefalse")&&e.push(c)})})),e}startRandomPractice(){return _e(this,null,function*(){let n=yield P(this.authService.authState().pipe(A(1)));if(!n)return;let e=yield P(this.sections$.pipe(A(1))),i=this.extractPassedQuestions(e);if(!i.length)return;let r=[...i].sort(()=>Math.random()-.5).slice(0,10),c=yield P(this.attemptService.createQuestioningSession(n.uid,"practice-random","practice","random"));this.practiceService.set({mode:"random",sessionId:c,questions:r}),this.router.navigate(["/random"])})}startWorstPractice(){return _e(this,null,function*(){let n=yield P(this.authService.authState().pipe(A(1)));if(!n)return;let e=yield P(this.sections$.pipe(A(1))),i=this.extractPassedQuestions(e);if(!i.length)return;let r=yield P(this.attemptService.getUserQuestionStats(n.uid).pipe(A(1))),c=[],p=[];i.forEach(u=>{let f=r[u.id];if(f){if(f.correct===0&&f.incorrect>0)c.push({content:u,incorrect:f.incorrect});else if(f.total>0){let U=f.correct/f.total;U<1&&p.push({content:u,ratio:U,incorrect:f.incorrect})}}}),c.sort((u,f)=>f.incorrect-u.incorrect);let d=c.map(u=>u.content);if(d.length<10){p.sort((u,f)=>u.ratio-f.ratio||f.incorrect-u.incorrect);for(let u of p){if(d.length>=10)break;d.includes(u.content)||d.push(u.content)}}let _=d.slice(0,10),$=yield P(this.attemptService.createQuestioningSession(n.uid,"practice-worst","practice","worst"));this.practiceService.set({mode:"worst",sessionId:$,questions:_}),this.router.navigate(["/worst"])})}goToGlobalLeaderboard(){this.router.navigate(["/leaderboard"])}goToStats(){this.router.navigate(["/stats"])}static \u0275fac=function(e){return new(e||t)(T(ce),T(ot),T(st),T(at),T(ct),T(lt))};static \u0275cmp=m({type:t,selectors:[["app-home"]],decls:31,vars:20,consts:[[1,"container"],[1,"header-title"],[2,"display","flex","align-items","center","gap",".5rem"],[1,"logo-icon"],[1,"welcome-text"],[1,"username"],[1,"points-row"],[2,"flex-grow","1"],[1,"login-button"],[1,"content"],[1,"logo"],[2,"text-align","center"],[1,"practice-buttons"],[1,"login-button",3,"click"],[1,"login-label"],[1,"buttons-row"],[1,"practice-btn",3,"click","disabled"],[1,"pb-tooltip"],[1,"practice-btn",3,"click"],[3,"title"],[1,"section-content"],[3,"title","available","earnedPoints","requiredPoints","userTotalPoints","potentialMaxPoints","destination"]],template:function(e,i){if(e&1&&(o(0,"div",0)(1,"header")(2,"div",1)(3,"div",2),h(4,"svg-python",3),o(5,"div",4),Q(6),B(7,"async"),o(8,"div",5),l(9),B(10,"async"),a(),o(11,"div",6),l(12),B(13,"async"),a()()(),h(14,"div",7),Y(15,jt,4,0,"button",8)(16,Ft,4,0,"button",8),a()(),o(17,"div",9)(18,"div",10),h(19,"svg-python"),a(),o(20,"h2",11),l(21),B(22,"async"),a(),Q(23),B(24,"async"),Y(25,Bt,14,4,"div",12),o(26,"app-section-container"),Q(27),B(28,"async"),Y(29,Kt,2,0)(30,qt,2,0,"p"),a()()()),e&2){let r=V(7,6,i.userIsAuthenticated$);s(9),K(V(10,8,i.userDisplayName$)),s(3),O("",V(13,10,i.userPoints$)||0," pts"),s(3),Z(r?15:16),s(6),O("Welcome, ",V(22,12,i.userDisplayName$),"!"),s(2);let c=oe(V(24,14,i.hasPassedSubject$));s(2),Z(c!==null?25:-1),s(2);let p=oe(V(28,17,i.sections$));s(2),Z(p!=null&&p.length?29:30)}},dependencies:[ae,q,de,me,pe,fe,he,gt,nt],styles:[".section-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.username[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:var(--electric-blue)}.logo[_ngcontent-%COMP%]{width:15rem;height:15rem;margin:0 auto}.container[_ngcontent-%COMP%]{height:100vh;width:100vw!important}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem}.home-page[_ngcontent-%COMP%]{flex-direction:column;display:flex;justify-content:center;align-items:center}.header-container[_ngcontent-%COMP%]{display:flex;flex-grow:1}header[_ngcontent-%COMP%]{background:var(--dark-blue);padding:1rem;box-shadow:0 2px 4px #0000001a;display:flex;align-items:center;justify-content:space-between}.login-button[_ngcontent-%COMP%]{position:relative;padding:.5rem 1rem;font-size:1rem;border:none;background:none;color:var(--white);border-radius:4px;cursor:pointer;display:inline-flex;align-items:center;gap:.5em}.login-button[_ngcontent-%COMP%]:hover{color:var(--electric-blue)}.login-label[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transform:translate(4px);transition:opacity .2s ease-in-out,transform .2s ease-in-out,visibility 0s .2s}.login-button[_ngcontent-%COMP%]:hover   .login-label[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0);transition-delay:0s}.header-title[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center;gap:.5rem}.user-info[_ngcontent-%COMP%]{color:var(--electric-blue);font-weight:700;font-size:.8rem}.practice-buttons[_ngcontent-%COMP%]{margin:1.5rem 0 2rem;display:flex;justify-content:center}.buttons-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.practice-btn[_ngcontent-%COMP%]{position:relative;padding:.5rem 1rem;font-size:1rem;border:none;background-color:var(--dark-blue);color:var(--white);border-bottom:2px solid var(--electric-blue);border-radius:4px;cursor:pointer}.practice-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--electric-blue);color:var(--dark-blue)}.practice-btn[_ngcontent-%COMP%]:disabled{opacity:.45;cursor:not-allowed;border-color:#555}.practice-btn[_ngcontent-%COMP%]   .pb-tooltip[_ngcontent-%COMP%]{position:absolute;left:0;top:100%;margin-top:.35rem;background:#1f2a40;color:var(--white);padding:.5rem .6rem;border-radius:4px;font-size:.65rem;width:180px;opacity:0;pointer-events:none;transform:translateY(4px);transition:opacity .25s,transform .25s;z-index:5}.practice-btn[_ngcontent-%COMP%]:hover   .pb-tooltip[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}"]})};export{_t as HomeComponent};
